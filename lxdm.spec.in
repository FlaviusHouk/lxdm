# on SuSE based distros that's allow compilation
# without root rights, on other distros that's just
# a comment, you should keep it.
# norootforbuild

Name:		lxdm
Version:	@PACKAGE_VERSION@
Release:	1
Summary:	Light weight X11 display manager
License:	GPL
# On SuSE that's not a valid RPM group,
# that MAY change on different distros (not sure)
# SuSE group is commented
#Group:		System/GUI/Others

Group:		User Interface/X
URL:		http://lxde.sourceforge.net/
# the source should be an archive...
#Source0:	https://lxde.svn.sourceforge.net/svnroot/lxde/trunk/lxdm/
Source0:	lxdm.tar.bz2

BuildRoot:	%{_tmppath}/%{name}-%{version}-%{release}

BuildRequires:	gtk2-devel libXmu-devel pam-devel intltool

%description
Light weight X11 display manager

%prep
%setup -q

%build
# always export $RPM_OPT_FLAGS

export CFLAGS="$RPM_OPT_FLAGS"
export CXXFLAGS="$RPM_OPT_FLAGS"

# %configure macro already pass "--prefix=%_prefix"
# where prefix is /usr, if the user needs a different
# _prefix that should be exported on spec file like:
# %define _prefix /new/prefix
# %configure --prefix=/usr

%configure

# a make macro should be used here
# even a "job based" make if possible
# %__make %{?jobs:-j%{jobs}}

%__make

%install
# Never delete $RPM_BUILD_ROOT without re-make it
# that operation is already made by rpm itsealf
# and manual intervention may breake the build
# rm -rf $RPM_BUILD_ROOT

# better tu use %makeinstall macro
# make DESTDIR=${RPM_BUILD_ROOT} install

%makeinstall

# That's only required if translations are available
# (.mo/.po/.gmo/ecc) files available, otherwise
# that's not needed

#%find_lang %{name}

%clean
rm -rf $RPM_BUILD_ROOT

%post

%pre

%preun

%postun

# exactly as "%find_lang" macro
#%files -f %{name}.lang
%files
%defattr (-,root,root-)
%doc AUTHORS NEWS README COPYING INSTALL Changelog
%dir %{_datadir}/lxdm/
%dir %{_sysconfdir}/lxdm/
%{_bindir}/lxdm
%{_bindir}/lxdm-greeter-gtk
%{_sysconfdir}/lxdm/Xsession
%config %{_sysconfdir}/lxdm/lxdm.conf

%changelog
* dgod <dgod.osa@gmail.com> - @VERSION@-1
- Current version

